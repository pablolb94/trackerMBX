(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),o=a.n(c),s=a(34),l=a(3),i=a(4),m=a(7),u=a(5),p=a(6),d=a(8),h=a(80),f=a(164),E=a(162),g=a(161),b=a(163),v=a(77),w=a.n(v),N=a(33),j=a.n(N),O=j.a.initializeApp({apiKey:"AIzaSyBwyRT-RLMbTxj4MX_epYeJLyFknQ0ihrw",authDomain:"trackermbx-6eee5.firebaseapp.com",databaseURL:"https://trackermbx-6eee5.firebaseio.com",projectId:"trackermbx-6eee5",storageBucket:"trackermbx-6eee5.appspot.com",messagingSenderId:"117871294143"}),y=(w.a.createClass(O.database()),new j.a.auth.FacebookAuthProvider,a(78)),C=a.n(y),k=(a(145),a(147),a(149),a(13)),S=a.n(k),P=a(160),F=a(17),I=a.n(F),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).closePopover=a.closePopover.bind(Object(d.a)(Object(d.a)(a))),a.state={currentUser:a.props.currentUser,username:a.props.username},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"closePopover",value:function(){this.setState({popoverOpen:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"contenedor-nav"},r.a.createElement("nav",{className:"navbar"},r.a.createElement(P.a,{to:"/home"},r.a.createElement("img",{className:"icon",src:"images/nav-ico.PNG"})),r.a.createElement("div",{className:"d-flex justify-content-center h-100"},(this.props.authenticated,null)),this.props.authenticated?r.a.createElement("div",{className:"actions"},r.a.createElement(P.a,{to:"/home"},r.a.createElement("img",{src:"images/heart-icon.png"})),r.a.createElement("a",{href:"#",className:"dropbtn",onClick:function(){I()(".dropdown-content").slideToggle()}},r.a.createElement("img",{className:"imageProfile",src:"images/profile1.jpg"})),r.a.createElement("div",{className:"dropdown-content",onClick:function(){I()(".dropdown-content").slideToggle()}},r.a.createElement(P.a,{to:"#"},r.a.createElement("span",{className:"profileName"},this.state.username)),r.a.createElement("hr",null),r.a.createElement(P.a,{to:"/logout"},"Mi Perfil"),r.a.createElement(P.a,{to:"/profile"},"Configuraci\xf3n"),r.a.createElement("hr",null),r.a.createElement(P.a,{to:"/logout"},"Cerrar Sesi\xf3n"))):null))}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).authWithEmailPassword=a.authWithEmailPassword.bind(Object(d.a)(Object(d.a)(a))),a.state={redirect:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"authWithEmailPassword",value:function(e){var t=this;e.preventDefault();var a=this.emailInput.value,n=this.passwordInput.value;O.auth().fetchProvidersForEmail(a).then(function(e){return O.auth().signInWithEmailAndPassword(a,n)}).then(function(e){e.user&&e.user.email&&(t.loginForm.reset(),t.props.setCurrentUser(e.user),t.setState({redirect:!0}))}).catch(function(e){switch(e.message){case"There is no user record corresponding to this identifier. The user may have been deleted.":S.a.warning("Error. Usuario no encontrado o eliminado.",{position:"top",effect:"genie"});break;case"The email address is badly formatted.":S.a.warning("Error. Email Incorrecto / Mal formado.",{position:"top",effect:"genie"});break;case"The password is invalid or the user does not have a password.":S.a.warning("Error. Usuario / Contrase\xf1a incorrectos.",{position:"top",effect:"genie"});break;default:S.a.warning(e.message,{position:"top",effect:"genie"})}})}},{key:"render",value:function(){var e=this;return this.props.redirect?r.a.createElement(E.a,{to:"Home"}):r.a.createElement("div",{className:"logInDiv"},r.a.createElement("form",{onSubmit:function(t){e.authWithEmailPassword(t)},ref:function(t){e.loginForm=t}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",id:"email",ref:function(t){e.emailInput=t},"aria-describedby":"email",placeholder:"Enter email"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Introduzca un email de acceso.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password"},"Contrase\xf1a"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password","aria-describedby":"password",placeholder:"Enter password",ref:function(t){e.passwordInput=t}}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Introduzca una contrase\xf1a de acceso.")),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",className:"btn btn-info",value:"Iniciar Sesi\xf3n"}),r.a.createElement("br",null),r.a.createElement(P.a,{to:"/logUp"},r.a.createElement("br",null),r.a.createElement("p",{className:"registerText"},"\xbfNo tienes cuenta? - Registrate aqu\xed"))))}}]),t}(n.Component),B=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={redirect:!1},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;O.auth().signOut().then(function(t){e.setState({redirect:!0})})}},{key:"render",value:function(){return!0===this.state.redirect?r.a.createElement(E.a,{to:"/login"}):r.a.createElement("div",{style:{textAlign:"center",position:"absolute",top:"25%",left:"50%"}},r.a.createElement("h3",null,"Logging Out"))}}]),t}(n.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{to:"home"})}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).registredAccount=a.registredAccount.bind(Object(d.a)(Object(d.a)(a))),a.state={redirect:!1,accounts:e.accounts},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"registredAccount",value:function(e){var t=this;e.preventDefault();var a=this.emailInput.value,n=this.passwordInput.value,r=this.usernameImput.value,c=!1;for(var o in this.state.accounts)this.state.accounts.hasOwnProperty(o)&&r.toUpperCase()==this.state.accounts[o].username.toUpperCase()&&(c=!0);c?S.a.warning("Error. El nombre de usuario ya se encuentra en uso.",{position:"top",effect:"genie"}):a&&r&&n?j.a.auth().createUserWithEmailAndPassword(a,n).then(function(e){if(e.user&&e.user.email){var a={id:e.user.uid,username:r};t.props.addAccount(a),t.logUpForm.reset(),t.props.setCurrentUser(e.user),t.setState({redirect:!0})}}).catch(function(e){switch(e.message){case"The email address is already in use by another account.":S.a.warning("Error. El Email introducido ya se encuentra registrado.",{position:"top",effect:"genie"});break;case"The email address is badly formatted.":S.a.warning("Error. Email incorrecto.",{position:"top",effect:"genie"});break;case"The password is invalid or the user does not have a password.":S.a.warning("Error. Usuario no encontrado o eliminado.",{position:"top",effect:"genie"});break;case"Password should be at least 6 characters":S.a.warning("Error. La contrase\xf1a no cumple los requisitos.",{position:"top",effect:"genie"});break;default:S.a.warning(e.message,{position:"top",effect:"genie"})}}):S.a.warning("Error. Debes rellenar todos los campos.",{position:"top",effect:"genie"})}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(E.a,{to:"home"}):(console.log(this.state.accounts),r.a.createElement("div",{className:"logUpDiv"},r.a.createElement("form",{onSubmit:function(t){e.registredAccount(t)},ref:function(t){e.logUpForm=t}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",id:"email",ref:function(t){e.emailInput=t},"aria-describedby":"email",placeholder:"Enter email"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Introduzca un email valido.")),r.a.createElement("div",{className:"form-group",id:"usernameDiv"},r.a.createElement("label",{for:"username"},"Usuario"),r.a.createElement("input",{type:"text",name:"username",className:"form-control",id:"username",ref:function(t){e.usernameImput=t},placeholder:"Usuario"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Introduzca un usuario.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password"},"Contrase\xf1a"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password","aria-describedby":"password",placeholder:"Enter password",ref:function(t){e.passwordInput=t}}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Introduzca una contrase\xf1a (m\xednimo 6 caracters).")),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",className:"btn btn-info",value:"Crear Cuenta"}),r.a.createElement("br",null),r.a.createElement(P.a,{to:"/login"},r.a.createElement("br",null),r.a.createElement("p",{className:"registerText"},"Volver")))))}}]),t}(n.Component),T=function(e){function t(e){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"homeDiv"},r.a.createElement("p",null," Home "),r.a.createElement("div",{className:"bottomMenu"},r.a.createElement(P.a,{to:"/home"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{src:"icons/general/homeicon2.png"})))),r.a.createElement(P.a,{to:"/notifications"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{src:"icons/general/favoriteicon.png"})))),r.a.createElement(P.a,{to:"/search"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{src:"icons/general/searchicon.png"})))),r.a.createElement(P.a,{to:"/profile/"+this.props.account.username},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{src:"icons/general/profileicon.png"}))))))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={user:a.props.user,userMail:a.props.user.email,userName:a.props.username},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"NotificationsDiv"},"Notifications",r.a.createElement("div",{className:"bottomMenu"},r.a.createElement(P.a,{to:"/home"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/homeicon.png"})))),r.a.createElement(P.a,{to:"/notifications"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/favoriteicon2.png"})))),r.a.createElement(P.a,{to:"/search"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/searchicon.png"})))),r.a.createElement(P.a,{to:"/profile/"+this.state.userName},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/profileicon.png"}))))))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"SearchHeader",style:{padding:"20px"}},r.a.createElement("div",{className:"searchbar"},r.a.createElement("input",{className:"search_input",type:"text",onChange:function(t){return e.props.updateSearchFilter(t)},placeholder:"Busqueda"})))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"objectProfileSearch"},r.a.createElement("div",{className:"imageProfileSearch"},this.props.account.image?r.a.createElement("img",{src:this.props.account.image}):r.a.createElement("img",{src:"images/profile1.jpg"})),r.a.createElement("div",{className:"describeProfileSearch"},r.a.createElement(P.a,{to:"/profile/"+this.props.account.username},this.props.account.username)),r.a.createElement("div",{className:"followBtnSearch"},this.props.following?r.a.createElement("input",{type:"submit",onClick:function(){return e.props.updateFollow(e.props.account.id,!1)},className:"btn btn-warning btnFollowSearch",id:"test",value:"Dejar de seguir"}):r.a.createElement("input",{type:"submit",onClick:function(){return e.props.updateFollow(e.props.account.id,!0)},className:"btn btn-success btnFollowSearch",value:"Comenzar a seguir"})))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).updateSearchFilter=a.updateSearchFilter.bind(Object(d.a)(Object(d.a)(a))),a.state={filters:""},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"updateSearchFilter",value:function(e){this.setState({filters:e.target.value})}},{key:"render",value:function(){var e=this.props.accounts,t=this.props.account,a=this.props.updateFollow,n=new Array;if(this.state.filters){var c=this.state.filters;Object.keys(e).map(function(t){e[t].username.toUpperCase().includes(c.toUpperCase())&&n.push(e[t])}),e=n}return r.a.createElement("div",{className:"searchContent"},r.a.createElement(z,{filters:this.state.filters,updateSearchFilter:this.updateSearchFilter}),r.a.createElement("div",{className:"searchBody"},Object.keys(e).map(function(n,c,o){if(e[n].username==t.username)return"";var s=!1;return t.following&&t.following.forEach(function(t){t==e[n].id&&(s=!0)}),r.a.createElement(W,{updateFollow:a,account:e[n],following:s})}),r.a.createElement("hr",null)),r.a.createElement("div",{className:"bottomMenu"},r.a.createElement(P.a,{to:"/home"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{src:"icons/general/homeicon.png"})))),r.a.createElement(P.a,{to:"/notifications"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{src:"icons/general/favoriteicon.png"})))),r.a.createElement(P.a,{to:"/search"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{src:"icons/general/searchicon.png"})))),r.a.createElement(P.a,{to:"/profile/"+this.props.account.username},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{src:"icons/general/profileicon.png"}))))))}}]),t}(n.Component),L=function(e){function t(e){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"headerProfile"},r.a.createElement("div",{className:"profileImg"},r.a.createElement("img",{src:this.props.account.image})),r.a.createElement("div",{className:"profileDesc"},r.a.createElement("p",null,this.props.account.username),r.a.createElement(P.a,{to:"/configprofile"},r.a.createElement("div",{className:"btn btn-info configUserBtn"},"Configuraci\xf3n")),r.a.createElement(P.a,{to:"/logout"},r.a.createElement("div",{className:"btn btn-info closeSessionBtn"},r.a.createElement("img",{src:"icons/general/closeSessionIcon.png"})))))}}]),t}(n.Component),_=function(e){function t(e){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=!1;return this.props.account2.following&&this.props.account2.following.forEach(function(a){a==e.props.account.id&&(t=!0)}),r.a.createElement("div",{className:"headerProfile"},r.a.createElement("div",{className:"profileImg"},r.a.createElement("img",{src:this.props.account.image?this.props.account.image:"images/profile1.jpg"})),r.a.createElement("div",{className:"profileDesc"},r.a.createElement("p",null,this.props.account.username),t?r.a.createElement("input",{onClick:function(){e.props.updateFollow(e.props.account.id,!1)},type:"submit",className:"btn btn-warning configUserBtn",id:"test",value:"Dejar de seguir"}):r.a.createElement("input",{onClick:function(){e.props.updateFollow(e.props.account.id,!0)},type:"submit",className:"btn btn-success configUserBtn",value:"Comenzar a seguir"})))}}]),t}(n.Component),J=function(e){function t(e){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.account;return r.a.createElement("div",{className:"profileInfoFollow"},r.a.createElement("div",null,r.a.createElement("span",{className:"low"},"Rutas:",r.a.createElement("br",null)),r.a.createElement("span",{className:"big"},"12 ",e.tracks)),r.a.createElement("div",null,r.a.createElement("span",{className:"low"},"Seguidores:",r.a.createElement("br",null)),r.a.createElement("span",{className:"big"},void 0==e.followers?0:e.followers.length)),r.a.createElement("div",{className:"lastFollowDiv"},r.a.createElement("span",{className:"low"},"Seguidos:",r.a.createElement("br",null)),r.a.createElement("span",{className:"big"},void 0==e.following?0:e.following.length)))}}]),t}(n.Component),R=a(61),Y=a.n(R);a(157);Y.a.accessToken="pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA";var q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={lng:-4.190338,lat:37.427712},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=(e.lng,e.lat,new Y.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/satellite-v9",zoom:5}));t.on("load",function(){var e={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:[[-4.193932,37.432815],[-4.194007,37.432073],[-4.193535,37.431383],[-4.192698,37.43077],[-4.19229,37.429952],[-4.191786,37.429509],[-4.191561,37.429109],[-4.191152,37.428494],[-4.190572,37.42788],[-4.190338,37.427712],[-4.189947,37.427516],[-4.189759,37.427158],[-4.189191,37.426706],[-4.188697,37.42628],[-4.18799,37.425939],[-4.187775,37.425411],[-4.187486,37.424883],[-4.187121,37.424124],[-4.186939,37.423843]]}}]},a=e.features[0].geometry.coordinates;e.features[0].geometry.coordinates=[a[0]],t.addSource("trace",{type:"geojson",data:e}),t.addLayer({id:"trace",type:"line",source:"trace",paint:{"line-color":"#FF512F","line-opacity":.75,"line-width":5}}),t.jumpTo({center:a[0],zoom:16}),t.setPitch(30);var n=0,r=window.setInterval(function(){n<a.length?(e.features[0].geometry.coordinates.push(a[n]),t.getSource("trace").setData(e),t.panTo(a[n]),n++):window.clearInterval(r)},40)})}},{key:"render",value:function(){var e=this,t=this.state;t.lng,t.lat,t.zoom;return r.a.createElement("div",{className:"publication"},r.a.createElement("div",{className:"publicationHeader"},r.a.createElement("div",{className:"parseRoute"},r.a.createElement("span",{class:"glyphicon glyphicon-chevron-left"}),r.a.createElement("span",null,"2 / 12"),r.a.createElement("span",{class:"glyphicon glyphicon-chevron-right"})),r.a.createElement("span",{class:"glyphicon glyphicon-fullscreen"})),r.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"map"}),r.a.createElement("div",{className:"publicationBody"},r.a.createElement("div",{className:"interactions"},r.a.createElement("span",{class:"glyphicon glyphicon-star"}),r.a.createElement("span",{class:"glyphicon glyphicon-play"}),"\xa0 (1160)"),r.a.createElement("hr",null),r.a.createElement("div",{className:"dificult"},r.a.createElement("h4",null,"Dificultad:"),r.a.createElement("div",{className:"dificultDiv"},r.a.createElement("input",{type:"range",min:"1",max:"10",value:"7",class:"slider"}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"comments"},r.a.createElement("h4",null,"Comentarios:"),r.a.createElement("div",{className:"comment"},r.a.createElement("a",{href:"#"},"Pablolb94:")," Comentario de Prueba \ud83d\udc4f\ud83d\udc4f"),r.a.createElement("div",{className:"comment"},r.a.createElement("a",{href:"#"},"enlatao:")," Comentario 2"),r.a.createElement("div",{className:"comment"},r.a.createElement("a",{href:"#"},"Joni:")," Ruta demasiado facil"),r.a.createElement("div",{className:"comment"},r.a.createElement("a",{href:"#"},"Javito:")," Viva Mexico cabrones !")),r.a.createElement("div",{className:"showAllComments"},"Mostrar todos (4)")),r.a.createElement("div",{className:"publicationFooter"},"05/01/2019"))}}]),t}(n.Component),Q=function(e){function t(e){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="";for(var t in this.props.accounts)this.props.accounts.hasOwnProperty(t)&&this.props.match.params.username==this.props.accounts[t].username&&(e=this.props.accounts[t]);return r.a.createElement("div",{className:"profileDiv"},this.props.match.params.username==this.props.account.username?r.a.createElement(L,{account:this.props.account}):r.a.createElement(_,{account:e,account2:this.props.account,updateFollow:this.props.updateFollow}),this.props.match.params.username==this.props.account.username?r.a.createElement(J,{account:this.props.account}):r.a.createElement(J,{account:e}),r.a.createElement(q,null),r.a.createElement("div",{className:"bottomMenu"},r.a.createElement(P.a,{to:"/home"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/homeicon.png"})))),r.a.createElement(P.a,{to:"/notifications"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/favoriteicon.png"})))),r.a.createElement(P.a,{to:"/search"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/searchicon.png"})))),r.a.createElement(P.a,{to:"/profile/"+this.props.account.username},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/profileicon2.png"}))))))}}]),t}(n.Component),X=a(79),G=a.n(X),V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={image:[]},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"getFiles",value:function(e){this.setState({image:e[0].base64});var t=Object(s.a)({},this.props.accounts),a=Object(s.a)({},this.props.account);O.database();for(var n in t)t.hasOwnProperty(n)&&t[n].username==a.username&&this.props.udateImageProfile(n,this.state.image);I()(".uploadImageDiv").html("<p>Imagen actualizada con exito. <span class='glyphicon glyphicon glyphicon-ok'></span></p>")}},{key:"render",value:function(){return r.a.createElement("div",{className:"configProfileBody"},r.a.createElement("div",{className:"separatorProfileForms"},r.a.createElement("div",{className:"titleSubConfProfile",onClick:function(){I()(".changeData").slideToggle()}},r.a.createElement("p",null,"Datos de Usuario")),r.a.createElement("div",{className:"formSubConfProfileForms changeData"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"username"},"Usuario:"),r.a.createElement("input",{type:"text",className:"form-control",id:"username",placeholder:"Usuario",name:"username",value:this.props.account.username,disabled:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"email"},"Email:"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",name:"email",value:this.props.user.email,disabled:!0})))),r.a.createElement("div",{className:"separatorProfileForms"},r.a.createElement("div",{className:"titleSubConfProfile",onClick:function(){I()(".uploadImageDiv").slideToggle()}},r.a.createElement("p",null,"Foto de Perfil")),r.a.createElement("div",{className:"formSubConfProfileForms uploadImageDiv"},r.a.createElement(G.a,{multiple:!0,onDone:this.getFiles.bind(this)}))),r.a.createElement("div",{className:"separatorProfileForms"},r.a.createElement("div",{className:"titleSubConfProfile",onClick:function(){I()(".changePassword").slideToggle()}},r.a.createElement("p",null,"Cambiar Contrase\xf1a")),r.a.createElement("div",{className:"formSubConfProfileForms changePassword"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password_new"},"Contrase\xf1a Antigua:"),r.a.createElement("input",{type:"password",className:"form-control",id:"password_new",placeholder:"Contrase\xf1a Antigua",name:"password_new"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password_old"},"Contrase\xf1a Nueva:"),r.a.createElement("input",{type:"password",className:"form-control",id:"password_old",placeholder:"Contrase\xf1a Nueva",name:"password_old"})),r.a.createElement("button",{type:"button",className:"btn btn-info"},"Actualizar Contrase\xf1a"))))}}]),t}(n.Component),Z=function(e){function t(e){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"configProfileDiv"},r.a.createElement(V,{account:this.props.account,accounts:this.props.accounts,user:this.props.user,udateImageProfile:this.props.udateImageProfile}),r.a.createElement("div",{className:"bottomMenu"},r.a.createElement(P.a,{to:"/home"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/homeicon.png"})))),r.a.createElement(P.a,{to:"/notifications"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/favoriteicon.png"})))),r.a.createElement(P.a,{to:"/search"},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/searchicon.png"})))),r.a.createElement(P.a,{to:"/profile/"+this.props.account.username},r.a.createElement("div",{className:"buttonBottom"},r.a.createElement("p",null,r.a.createElement("img",{alt:"",src:"icons/general/profileicon2.png"}))))))}}]),t}(n.Component),K=C()();function $(e){var t=e.component,a=e.authenticated,n=Object(h.a)(e,["component","authenticated"]);return r.a.createElement(f.a,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,Object.assign({},e,n)):r.a.createElement(E.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var ee=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).setCurrentUser=e.setCurrentUser.bind(Object(d.a)(Object(d.a)(e))),e.addAccount=e.addAccount.bind(Object(d.a)(Object(d.a)(e))),e.updateStateAll=e.updateStateAll.bind(Object(d.a)(Object(d.a)(e))),e.updateFollow=e.updateFollow.bind(Object(d.a)(Object(d.a)(e))),e.udateImageProfile=e.udateImageProfile.bind(Object(d.a)(Object(d.a)(e))),e.state={authenticated:!1,currentUser:null,loading:!0,accounts:{},account:""},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.removeAuthListener=O.auth().onAuthStateChanged(function(t){t?e.setState({authenticated:!0,currentUser:t}):e.setState({authenticated:!1,currentUser:null,loading:!1})})}},{key:"componentDidMount",value:function(){var e=this;this.db=O.database().ref().child("accounts");var t=this.state.accounts;this.db.on("child_added",function(a){var n=a.val();t[a.key]=n,e.setState({accounts:t}),e.state.currentUser&&e.state.currentUser.uid==a.val().id&&e.setState({account:a.val(),loading:!1})})}},{key:"setCurrentUser",value:function(e){if(e){var t=new Object;for(var a in this.state.accounts)this.state.accounts.hasOwnProperty(a)&&e.uid==this.state.accounts[a].id&&(t=this.state.accounts[a]);this.setState({currentUser:e,authenticated:!0,account:t})}else this.setState({currentUser:null,authenticated:!1,account:""})}},{key:"addAccount",value:function(e){Object(s.a)({},this.state.accounts);this.db.push().set(e)}},{key:"updateStateAll",value:function(e,t){this.setState({account:t,accounts:e})}},{key:"updateFollow",value:function(e,t){var a=O.database(),n=this.state.accounts,r=this.state.account,c="";if(t){for(var o in n)if(n.hasOwnProperty(o)&&(n[o].id==r.id&&(c=o),n[o].id==e)){if(n[o].followers)n[o].followers.push(r.id);else(s=new Array).push(r.id),n[o].followers=s;a.ref("accounts/"+o+"/followers").set(n[o].followers)}var s;if(r.following)r.following.push(e);else(s=new Array).push(e),r.following=s;a.ref("accounts/"+c+"/following").set(r.following),this.setState({accounts:n,account:r})}else{for(var o in n)if(n.hasOwnProperty(o)&&(n[o].id==r.id&&(c=o),n[o].id==e)){var l=0;n[o].followers.forEach(function(e){e==r.id&&(n[o].followers.splice(l,1),a.ref("accounts/"+o+"/followers").set(n[o].followers)),l++})}l=0;r.following.forEach(function(t){t==e&&(r.following.splice(l,1),a.ref("accounts/"+c+"/following").set(r.following)),l++}),this.setState({accounts:n,account:r})}}},{key:"udateImageProfile",value:function(e,t){var a=this.state.accounts,n=this.state.account;O.database().ref("accounts/"+e+"/image").set(t),n.image=t,a[e].image=t,this.setState({account:n,accounts:a})}},{key:"render",value:function(){var e=this;return!0===this.state.loading?r.a.createElement("div",{className:"LoadingDiv"},r.a.createElement("img",{src:"images/nav-ico.PNG"})):r.a.createElement("div",{className:"contenedor"},r.a.createElement(S.a,{stack:{limit:3}}),r.a.createElement(g.a,{history:K},r.a.createElement("div",null,r.a.createElement(U,{authenticated:this.state.authenticated,currentUser:this.state.currentUser}),r.a.createElement(b.a,null,r.a.createElement($,{exact:!0,path:"/",authenticated:!1,component:x}),r.a.createElement($,{exact:!0,path:"/home",authenticated:this.state.authenticated,component:T,account:this.state.account}),r.a.createElement($,{exact:!0,path:"/search",authenticated:this.state.authenticated,component:H,account:this.state.account,accounts:this.state.accounts,updateFollow:this.updateFollow}),r.a.createElement($,{exact:!0,path:"/Profile/:username",authenticated:this.state.authenticated,component:Q,accounts:this.state.accounts,account:this.state.account,updateFollow:this.updateFollow}),r.a.createElement($,{exact:!0,path:"/Notifications",authenticated:this.state.authenticated,component:M}),r.a.createElement($,{exact:!0,path:"/Configprofile",authenticated:this.state.authenticated,component:Z,accounts:this.state.accounts,account:this.state.account,user:this.state.currentUser,udateImageProfile:this.udateImageProfile}),r.a.createElement(f.a,{path:"/logout",component:B}),r.a.createElement(f.a,{path:"/login",render:function(t){return r.a.createElement(x,Object.assign({redirect:e.state.currentUser,setCurrentUser:e.setCurrentUser},t))}}),r.a.createElement(f.a,{path:"/logup",render:function(t){return r.a.createElement(D,Object.assign({accounts:e.state.accounts,redirect:e.state.currentUser,addAccount:e.addAccount,setCurrentUser:e.setCurrentUser},t))}}),r.a.createElement(f.a,{component:A})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=function(){o.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})};window.cordova?document.addEventListener("deviceready",te,!1):te()},81:function(e,t,a){e.exports=a(158)}},[[81,2,1]]]);
//# sourceMappingURL=main.a4821d19.chunk.js.map